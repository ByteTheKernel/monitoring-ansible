# Monitoring Ansible Project

## üìñ –û–ø–∏—Å–∞–Ω–∏–µ

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä—É–µ—Ç —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –Ω–∞ –æ–¥–Ω–æ–º
—Å–µ—Ä–≤–µ—Ä–µ —Å –ø–æ–º–æ—â—å—é **Ansible**.\
–í —Å–æ—Å—Ç–∞–≤–µ: 
- **Node Exporter** –¥–ª—è —Å–±–æ—Ä–∞ –º–µ—Ç—Ä–∏–∫
- **Prometheus** –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –º–µ—Ç—Ä–∏–∫
- **Grafana** –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏

–ü—Ä–æ–µ–∫—Ç —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π VM (localhost) –∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç: 
- –ò–º—è —Ö–æ—Å—Ç–∞ –∏ —Ç–∞–π–º–∑–æ–Ω—É
- –°–∏—Å—Ç–µ–º–Ω—ã–π NTP
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å–µ—Ä–≤–∏—Å—ã (prometheus,
grafana, node_exporter)
- –†–∞–±–æ—á–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –≤ `/srv/`

------------------------------------------------------------------------

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

    monitoring-ansible/
    ‚îú‚îÄ‚îÄ group_vars/
    ‚îÇ   ‚îî‚îÄ‚îÄ all.yml               # –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (hostname, timezone, –ø–∞—Ä–æ–ª–∏ –∏ —Ç.–¥.)
    ‚îú‚îÄ‚îÄ roles/
    ‚îÇ   ‚îú‚îÄ‚îÄ common/               # –ë–∞–∑–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (hostname, timezone, ntp, –ø–∞–∫–µ—Ç—ã)
    ‚îÇ   ‚îú‚îÄ‚îÄ node_exporter/        # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ node_exporter
    ‚îÇ   ‚îú‚îÄ‚îÄ prometheus/           # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Prometheus
    ‚îÇ   ‚îî‚îÄ‚îÄ grafana/              # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Grafana
    ‚îú‚îÄ‚îÄ site.yml                  # –ì–ª–∞–≤–Ω—ã–π playbook
    ‚îú‚îÄ‚îÄ README.md                 # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
    ‚îî‚îÄ‚îÄ .gitignore                # –ò—Å–∫–ª—é—á–µ–Ω–∏—è –¥–ª—è git

------------------------------------------------------------------------

## üöÄ –ó–∞–ø—É—Å–∫

1.  –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

    ``` bash
    sudo apt update
    sudo apt install -y ansible git
    ```

2.  –ü–µ—Ä–µ–π—Ç–∏ –≤ –∫–∞—Ç–∞–ª–æ–≥ –ø—Ä–æ–µ–∫—Ç–∞:

    ``` bash
    cd monitoring-ansible
    ```

3.  –ó–∞–ø—É—Å—Ç–∏—Ç—å playbook:

    ``` bash
    ansible-playbook site.yml
    ```

------------------------------------------------------------------------

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

- Node Exporter: `http://localhost:9100/metrics`
- Prometheus: `http://localhost:9090`
- Grafana: `http://localhost:3000` (–ª–æ–≥–∏–Ω/–ø–∞—Ä–æ–ª—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `admin/admin`)

------------------------------------------------------------------------

## üõ†Ô∏è –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

-   –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã —Ä–∞–±–æ—Ç–∞—é—Ç –æ—Ç —Å–≤–æ–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (`grafana_user`,
    `prometheus_user`, `node_exporter_user`).
-   –†–∞–±–æ—á–∏–µ –∫–∞—Ç–∞–ª–æ–≥–∏ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω—ã –≤ `/srv/`.
-   Grafana –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ Prometheus –∏ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç
    –¥–∞—à–±–æ—Ä–¥ **Node Exporter Full (ID 1860)**.

------------------------------------------------------------------------

üìå –û—Ä–µ—à–∫–æ –í–ª–∞–¥–∏—Å–ª–∞–≤
